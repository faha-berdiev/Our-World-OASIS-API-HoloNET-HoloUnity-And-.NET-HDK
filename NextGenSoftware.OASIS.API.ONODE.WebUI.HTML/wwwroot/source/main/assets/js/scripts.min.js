function Util(){}Util.hasClass=function(e,t){return e.classList?e.classList.contains(t):!!e.getAttribute("class").match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},Util.addClass=function(e,t){t=t.split(" ");e.classList?e.classList.add(t[0]):Util.hasClass(e,t[0])||e.setAttribute("class",e.getAttribute("class")+" "+t[0]),1<t.length&&Util.addClass(e,t.slice(1).join(" "))},Util.removeClass=function(e,t){var s=t.split(" ");e.classList?e.classList.remove(s[0]):Util.hasClass(e,s[0])&&(t=new RegExp("(\\s|^)"+s[0]+"(\\s|$)"),e.setAttribute("class",e.getAttribute("class").replace(t," "))),1<s.length&&Util.removeClass(e,s.slice(1).join(" "))},Util.toggleClass=function(e,t,s){s?Util.addClass(e,t):Util.removeClass(e,t)},Util.setAttributes=function(e,t){for(var s in t)e.setAttribute(s,t[s])},Util.getChildrenByClassName=function(e,t){e.children;for(var s=[],n=0;n<e.children.length;n++)Util.hasClass(e.children[n],t)&&s.push(e.children[n]);return s},Util.is=function(e,t){if(t.nodeType)return e===t;for(var s="string"==typeof t?document.querySelectorAll(t):t,n=s.length;n--;)if(s[n]===e)return!0;return!1},Util.setHeight=function(s,n,i,a,o,l){function r(e){var t=e-(d=d||e);a<t&&(t=a),e=parseInt(t/a*c+s),l&&(e=Math[l](t,s,n-s,a)),i.style.height=e+"px",t<a?window.requestAnimationFrame(r):o&&o()}var c=n-s,d=null;i.style.height=s+"px",window.requestAnimationFrame(r)},Util.scrollTo=function(s,n,i,e){var a=e||window,o=a.scrollTop||document.documentElement.scrollTop,l=null;e||(o=window.scrollY||document.documentElement.scrollTop);function r(e){var t=e-(l=l||e);n<t&&(t=n),e=Math.easeInOutQuad(t,o,s-o,n),a.scrollTo(0,e),t<n?window.requestAnimationFrame(r):i&&i()}window.requestAnimationFrame(r)},Util.moveFocus=function(e){(e=e||document.getElementsByTagName("body")[0]).focus(),document.activeElement!==e&&(e.setAttribute("tabindex","-1"),e.focus())},Util.getIndexInArray=function(e,t){return Array.prototype.indexOf.call(e,t)},Util.cssSupports=function(e,t){return"CSS"in window?CSS.supports(e,t):e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})in document.body.style},Util.extend=function(){var s={},n=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],e++);for(;e<t;e++)!function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?s[t]=extend(!0,s[t],e[t]):s[t]=e[t])}(arguments[e]);return s},Util.osHasReducedMotion=function(){if(!window.matchMedia)return!1;var e=window.matchMedia("(prefers-reduced-motion: reduce)");return!!e&&e.matches},Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null});{function CustomEvent(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var s=document.createEvent("CustomEvent");return s.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),s}"function"!=typeof window.CustomEvent&&(CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent)}function resetFocusTabsStyle(){window.dispatchEvent(new CustomEvent("initFocusTabs"))}function putCursorAtEnd(e){var t;e.setSelectionRange?(t=2*e.value.length,e.focus(),e.setSelectionRange(t,t)):e.value=e.value}Math.easeInOutQuad=function(e,t,s,n){return(e/=n/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},Math.easeInQuart=function(e,t,s,n){return s*(e/=n)*e*e*e+t},Math.easeOutQuart=function(e,t,s,n){return e/=n,-s*(--e*e*e*e-1)+t},Math.easeInOutQuart=function(e,t,s,n){return(e/=n/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t},Math.easeOutElastic=function(e,t,s,n){var i=1.70158,a=.7*n,o=s;return 0==e?t:1==(e/=n)?t+s:(a=a||.3*n,i=o<Math.abs(s)?(o=s,a/4):a/(2*Math.PI)*Math.asin(s/o),o*Math.pow(2,-10*e)*Math.sin((e*n-i)*(2*Math.PI)/a)+s+t)},function(){var n=document.getElementsByClassName("js-tab-focus"),e=!1,t=!1,s=!1;function i(){0<n.length&&(o(!1),window.addEventListener("keydown",a)),window.removeEventListener("mousedown",i),s=!(t=!1)}function a(e){9===e.keyCode&&(o(!0),window.removeEventListener("keydown",a),window.addEventListener("mousedown",i),t=!0)}function o(e){for(var t=e?"":"none",s=0;s<n.length;s++)n[s].style.setProperty("outline",t)}function l(){e?s&&o(t):(e=0<n.length,window.addEventListener("mousedown",i))}l(),window.addEventListener("initFocusTabs",l)}();var ModalSignin=function(e){this.element=e,this.blocks=document.getElementsByClassName("js-modal-block"),this.triggers=document.getElementsByClassName("js-modal-trigger"),this.init()};ModalSignin.prototype.init=function(){for(var e,t=this,s=0;s<this.triggers.length;s++)e=s,t.triggers[e].addEventListener("click",function(e){e.target.hasAttribute("data-signin")&&t.showSigninForm(e.target.getAttribute("data-signin"))});this.element.addEventListener("click",function(e){hasClass(e.target,"js-modal")&&(e.preventDefault(),removeClass(t.element,"is-visible"))}),document.addEventListener("keyup",function(e){"Escape"==e.key&&(removeClass(t.element,"is-visible"),removeClass(t.blocks,"is-selected"))})},ModalSignin.prototype.showSigninForm=function(e){hasClass(this.element,"is-visible")||addClass(this.element,"is-visible");for(var t=0;t<this.blocks.length;t++)(this.blocks[t].getAttribute("data-type")==e?addClass:removeClass)(this.blocks[t],"is-selected")},ModalSignin.prototype.toggleError=function(e,t){toggleClass(e,"modal__input--has-error",t),toggleClass(e.nextElementSibling,"modal__error--is-visible",t)};var signinModal=document.getElementsByClassName("js-modal")[0];function hasClass(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function addClass(e,t){t=t.split(" ");e.classList?e.classList.add(t[0]):hasClass(e,t[0])||(e.className+=" "+t[0]),1<t.length&&addClass(e,t.slice(1).join(" "))}function removeClass(e,t){var s=t.split(" ");e.classList?e.classList.remove(s[0]):hasClass(e,s[0])&&(t=new RegExp("(\\s|^)"+s[0]+"(\\s|$)"),e.className=e.className.replace(t," ")),1<s.length&&removeClass(e,s.slice(1).join(" "))}function toggleClass(e,t,s){(s?addClass:removeClass)(e,t)}function addAuthPopup(e,t,s){var n,i=document.getElementsByClassName("alert")[0];i&&i.remove(),console.log(t);i=t.message||t.title;t.isError||400===t.status?n="error":(n="success",e&&(localStorage.setItem("avatar",JSON.stringify(t.avatar)),localStorage.setItem("loggedIn",!0)),setTimeout(()=>window.location.reload(),5e3)),e=e?"login-form":"signup-form";let a=document.getElementById(e);e=document.createElement("div");e.classList.add("alert"),e.classList.add(n),e.innerHTML=i,a.parentNode.insertBefore(e,a),console.log(n),s.preventDefault()}function onLogin(){const t=document.getElementById("login-submit");t.innerHTML='logging in... <img width="20px" src="assets/img/loading.gif"/>',t.disabled=!0;let s={email:document.getElementById("login-email").value,password:document.getElementById("login-password").value};(async()=>{const e=await fetch("https://api.oasisplatform.world/api/avatar/authenticate",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});t.innerHTML="Submit",addAuthPopup(!(t.disabled=!1),(200===e.status||t.classList.add("error"),await e.json()),e),window.location.reload()})()}async function onLogout(){var e=JSON.parse(localStorage.getItem("avatar"));console.log(JSON.parse(localStorage.getItem("avatar")));e={token:e.jwtToken};const t=document.getElementById("loading");t.classList.add("modal"),t.classList.add("is-visible"),t.innerHTML='<img src="assets/img/loading.gif"/>',console.log(e);await fetch("https://api.oasisplatform.world/api/avatar/revoke-token",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});localStorage.removeItem("avatar"),localStorage.setItem("loggedIn",!1),window.location.reload()}function onSignup(){const t=document.getElementById("signup-submit");t.innerHTML='loading... <img width="20px" src="assets/img/loading.gif"/>',t.disabled=!0;let s={email:document.getElementById("signup-email").value,password:document.getElementById("signup-password").value,confirmPassword:document.getElementById("confirm-signup-password").value,acceptTerms:!0,avatarType:"User"};(async()=>{const e=await fetch("https://api.oasisplatform.world/api/avatar/register",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});t.innerHTML="Submit",t.disabled=!1,200!==e.status&&t.classList.add("error"),e.status,addAuthPopup(!1,await e.json(),e),window.location.reload()})()}function accountDropdown(){var e;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&"true"===localStorage.getItem("loggedIn")&&((e=document.getElementsByClassName("nav__sub-list")[0]).classList.contains("nav__sub-list--clicked")?e.classList.remove("nav__sub-list--clicked"):e.classList.add("nav__sub-list--clicked"))}signinModal&&new ModalSignin(signinModal),function(){function e(e){this.element=e,this.password=this.element.getElementsByClassName("js-password__input")[0],this.visibilityBtn=this.element.getElementsByClassName("js-password__btn")[0],this.visibilityClass="password--text-is-visible",this.initPassword()}e.prototype.initPassword=function(){var t=this;this.visibilityBtn.addEventListener("click",function(e){document.activeElement!==t.password&&(e.preventDefault(),t.togglePasswordVisibility())})},e.prototype.togglePasswordVisibility=function(){var e=!Util.hasClass(this.element,this.visibilityClass);Util.toggleClass(this.element,this.visibilityClass,e),e?this.password.setAttribute("type","text"):this.password.setAttribute("type","password")};var t=document.getElementsByClassName("js-password");if(0<t.length)for(var s=0;s<t.length;s++)new e(t[s])}(),jQuery(document).ready(function(t){var s=t(".js-nav-trigger"),n=t("body"),i=t(".side-nav");s.on("click",function(e){e.preventDefault(),s.toggleClass("is-clicked"),i.toggleClass("is-visible"),t(".item--has-children").children("a").removeClass("submenu-open").next(".sub-menu").delay(300).slideUp()}),n.on("click",function(e){(t(e.target).is(n)||t(e.which).is("27"))&&(s.removeClass("is-clicked"),i.removeClass("is-visible"),t(".item--has-children").children("a").removeClass("submenu-open").next(".sub-menu").delay(300).slideUp())}),n.on("keydown",function(e){"Escape"===e.key&&(s.removeClass("is-clicked"),i.removeClass("is-visible"),t(".item--has-children").children("a").removeClass("submenu-open").next(".sub-menu").delay(300).slideUp())}),t(".item--has-children").children("a").on("click",function(e){e.preventDefault(),t(this).toggleClass("submenu-open").next(".sub-menu").slideToggle(300).end().parent(".item--has-children").siblings(".item--has-children").children("a").removeClass("submenu-open").next(".sub-menu").slideUp(300)})});